function initDashboard1(){$("nav.submenu").hide(),$("nav#dashboard").show();var a="SELECT count(*) as pedidos, DATE(data_de_compra) AS data FROM pedidos GROUP BY data_de_compra";mysqlQuery(a,function(a){function b(){var a=new google.visualization.DataTable;a.addColumn("string","Data"),a.addColumn("number","Pedidos");var b=[];$.each(c,function(a,c){var d=[c.data.substr(0,10),c.pedidos];b.push(d)}),a.addRows(b);var d=new google.visualization.BarChart(document.getElementById("chart"));d.draw(a,null)}var c=JSON.parse(a);google.charts.setOnLoadCallback(b)})}function initDashboard2(){$("nav.submenu").hide(),$("nav#dashboard").show();var a="SELECT count(*) AS pedidos, s.nome FROM pedidos p JOIN solicitantes s ON p.id_solicitante = s.id GROUP BY s.id";mysqlQuery(a,function(a){function b(){var a=new google.visualization.DataTable;a.addColumn("string","Solicitante"),a.addColumn("number","Pedidos");var b=[];$.each(c,function(a,c){var d=[c.nome,c.pedidos];b.push(d)}),a.addRows(b);var d=new google.visualization.BarChart(document.getElementById("chart"));d.draw(a,null)}var c=JSON.parse(a);google.charts.setOnLoadCallback(b)})}function initDashboard3(){$("nav.submenu").hide(),$("nav#dashboard").show();var a="SELECT p.id, DATE(p.data_de_compra) AS data_de_compra, p.cep, p.rua, p.cidade, p.estado, s.nome, s.telefone, s.cpf FROM pedidos p JOIN solicitantes s ON p.id_solicitante = s.id ORDER BY p.id";mysqlQuery(a,function(a){var b=JSON.parse(a);for(key in b){data_de_compra=b[key].data_de_compra.substr(0,10);var c="<tr><td>"+(Number(key)+1)+"</td><td>"+b[key].nome+"</td><td>"+b[key].telefone+"</td><td>"+b[key].cpf+"</td><td>"+b[key].cep+"</td><td>"+b[key].rua+"</td><td>"+data_de_compra+"</td></tr>";$(".tb-pedidos").append(c)}})}function hashchanged(){var a=location.hash.replace(/[#\/]/g,"")||"dashboard1";"#"!=a&&$("#main").load(a+".html")}function initTask(){function a(a){var b=!0;return $("div.has-error").removeClass("has-error"),$("span.help-block").remove(),a.find("input[type='text'], input[type='number'], input[type='tel']").each(function(){var a=$(this).val(),c=$(this);""!=a&&0!=a.length||(c.parents(".form-group").addClass("has-error"),c.parents(".form-group").append("<span class='help-block'>Ops! esse campo est치 inv치lido</span>"),b=!1)}),b}function b(){var a="SELECT * FROM materiais";mysqlQuery(a,function(a){var b=JSON.parse(a);h(b,4)})}function c(){var a="SELECT * FROM insumos RIGHT JOIN materiais ON insumos.id_material = materiais.id";mysqlQuery(a,function(a){var b=JSON.parse(a);i(b,2)})}function d(){var a=0;$(".tb-materiais tr").each(function(){a+=Number($(".qtd",this).text())*Number($(".preco",this).text())});var b=0;$(".tb-insumos tr").each(function(){b+=Number($(".qtd",this).text())*Number($(".preco",this).text())});var c=a+b;$("#preco-total").val(c)}function e(){$(".same-address").is(":checked")&&($("#cep-entrega").val($("#cep").val()),$("#endereco-entrega").val($("#endereco").val()),$("#cidade-entrega").val($("#cidade").val()),$("#estado-entrega").val($("#estado").val()))}function f(a){$.ajax({url:"https://viacep.com.br/ws/"+a.val()+"/json/",type:"GET",success:function(b){b.erro?alert("CEP inv치lido"):(a.parents(".form-container").find(".endereco").val(b.logradouro),a.parents(".form-container").find(".cidade").val(b.localidade),a.parents(".form-container").find(".estado").val(b.uf),e())},error:function(){alert("CEP inv치lido")}})}function g(a){var b="SELECT p.id, DATE(p.data_de_compra) AS data_de_compra, p.cep AS cep_pedido, p.rua AS endereco_pedido, p.cidade AS cidade_pedido, p.estado AS estado_pedido, s.nome, s.telefone, s.cpf, s.cep, s.rua, s.cidade, s.estado FROM pedidos p JOIN solicitantes s ON p.id_solicitante = s.id WHERE p.id = "+a+" ORDER BY p.id";mysqlQuery(b,function(a){var b=JSON.parse(a)[0];$(".dados-solicitante #nome").val(b.nome),$(".dados-solicitante #telefone").val(b.telefone),$(".dados-solicitante #cpf").val(b.cpf),$(".dados-solicitante #cep").val(b.cep),$(".dados-solicitante #endereco").val(b.rua),$(".dados-solicitante #cidade").val(b.cidade),$(".dados-solicitante #estado").val(b.estado),$("#cep-entrega").val(b.cep_pedido),$("#endereco-entrega").val(b.endereco_pedido),$("#cidade-entrega").val(b.cidade_pedido),$("#estado-entrega").val(b.estado_pedido),$("#data").val(b.data_de_compra.substr(0,10))}),b="SELECT * FROM materiais WHERE id_pedido = "+a,mysqlQuery(b,function(a){var b=JSON.parse(a);$(".tb-materiais tbody").html(""),h(b,b.length)}),b="SELECT i.descricao AS descricao, i.preco AS preco, i.quantidade AS quantidade, m.marca AS marca  FROM insumos i JOIN materiais m ON i.id_material = m.id WHERE i.id_pedido = "+a,mysqlQuery(b,function(a){var b=JSON.parse(a);$(".tb-insumos tbody").html(""),i(b,b.length)})}function h(a,b){for(var c=0;c<b;c++){var e="<tr><td>"+a[c].nome+"</td><td>"+a[c].marca+"</td><td class='qtd'>"+a[c].quantidade+"</td><td class='preco'>"+a[c].preco+"</td></tr>";$(".tb-materiais tbody").append(e),d()}}function i(a,b){for(var c=0;c<b;c++){var e="<tr><td>"+a[c].marca+"</td><td>"+a[c].descricao+"</td><td class='qtd'>"+a[c].quantidade+"</td><td class='preco'>"+a[c].preco+"</td></tr>";$(".tb-insumos tbody").append(e),d()}}$("nav.submenu").hide(),$("nav#task-menu").show(),$("#cep, #cep-entrega").blur(function(){var a=$(this).val();9!=a.length&&8!=a.length||f($(this))}),$(".same-address").change(function(){e()}),$("#bt-search").click(function(){""!=$("#numero").val()&&g($("#numero").val())}),$(".bt-modal-insurance").click(function(a){a.preventDefault()}),$(".bt-add-insurance").click(function(){var b={marca:$("#marca-insumo").val(),descricao:$("#descricao-insumo").val(),quantidade:$("#quantidade-insumo").val(),preco:$("#preco-insumo").val()};if(a($("#form-insurance"))){$("#modal-insurance .close").click();var c="<tr><td>"+b.marca+"</td><td>"+b.descricao+"</td><td class='qtd'>"+b.quantidade+"</td><td class='preco'>"+b.preco+"</td></tr>";$(".tb-insumos tbody").append(c),d()}}),$(".bt-submit").click(function(b){b.preventDefault(),a($("#form-task"))&&$(".bt-submit").removeClass("disabled")}),b(),c()}$(function(){$(window).on("hashchange",hashchanged),hashchanged(),$(".container-start > button").click(function(){window.location.href="#task"}),$(".submenu a").click(function(){$(".submenu a").removeClass("active"),$(this).addClass("active")}),$(".bt-menu").click(function(){$("#navbar").toggleClass("in")}),google.charts.load("current",{packages:["line","corechart","bar"]})});