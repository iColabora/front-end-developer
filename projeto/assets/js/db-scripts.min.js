var pedido=function(a,b){var c="SELECT id FROM pedidos WHERE id="+a;mysqlQuery(c,function(c){var d=JSON.parse(c);if("[]"!==JSON.stringify(d)){var e="SELECT p.id, p.data_de_compra, m.id_pedido, m.nome AS nm_material, m.marca, m.quantidade AS qt_material, m.preco AS vl_material, i.quantidade AS qt_insumo, i.preco AS vl_insumo FROM pedidos p, materiais m, insumos i WHERE p.id = m.id_pedido AND p.id = i.id_pedido AND p.id= "+a+" GROUP BY p.id";mysqlQuery(e,function(a){var c=JSON.parse(a);if(null!==c&&""!==c){var d=document.getElementById(b);""!==$.trim($("#search-result").html())&&$("#search-result").html(""),c.forEach(function(a){var b=a.vl_insumo*a.qt_insumo+a.vl_material*a.qt_material,c="<div><fieldset class='block-input'><label class='label'>N\xb0 Pedido</label><input type='text' value='"+a.id_pedido+"' class='input little' disabled /></fieldset><fieldset class='block-input'><label class='label'>Material</label><input type='text' value='"+a.nm_material+"' class='input full' disabled /></fieldset><fieldset class='block-input'><label class='label'>Marca</label><input type='text' value='"+a.marca+"' class='input full' disabled /></fieldset><fieldset class='block-input'><label class='label'>Data da Compra</label><input type='text' value='"+formataData(a.data_de_compra)+"' class='input full' disabled /></fieldset><fieldset class='block-input left'><label class='label'>Qtde.</label><input type='text' value='"+a.qt_material+"' class='input little' disabled /></fieldset><fieldset class='block-input right'><label class='label'>Total</label><input type='text' value='"+b+"' class='input preco' disabled /></fieldset></div>";d.innerHTML+=c})}})}else $("#search-result").append("<h1 class='not-found'>PEDIDO N\xc3O ENCONTRADO :'( </h1>")})},buscarPedidos=function(a){var b="SELECT p.*, s.id, s.nome AS nm_solicitante FROM pedidos p, solicitantes s WHERE p.id = s.id";mysqlQuery(b,function(b){var c=JSON.parse(b),d=document.getElementById(a);c.forEach(function(a){var b="<tr class='item_"+a.id+"' data-id="+a.id+"><td class='td'>"+a.id+"</td><td class='td'>"+a.nm_solicitante+"</td><td class='td'>"+formataData(a.data_de_compra)+"</td><td class='td'><i class='fa fa-chevron-down'></i></td></tr>";d.innerHTML+=b})})},buscarSolicitantes=function(){var a="SELECT id, nome, telefone, cpf, cep FROM solicitantes";mysqlQuery(a,function(a){var b=JSON.parse(a),c=document.getElementById("conteudo-solicitante");b.forEach(function(a){var b="<tr class='solicitante_"+a.id+"' data-id="+a.id+"><td class='td'>"+a.nome+"</td><td class='td'>"+a.telefone+"</td><td class='td'>"+a.cpf+"</td><td class='td' data-cep="+a.cep+">"+a.cep+"</td><td class='td'><i class='fa fa-chevron-down'></i></td></tr>";c.innerHTML+=b})})},buscarInsumos=function(a){var b="SELECT i.*, m.marca FROM insumos i, materiais m WHERE i.id_material = m.id LIMIT 0, "+a;mysqlQuery(b,function(a){var b=JSON.parse(a),c=document.getElementById("conteudo-insumo");b.forEach(function(a){var b="<tr class=insumo_'"+a.id+"' data-id="+a.id+"><td class='td'>"+a.id+"</td><td class='td'>"+a.id_pedido+"</td><td class='td'>"+a.marca+"</td><td class='td'>"+a.descricao+"</td><td class='td'>"+a.preco+"</td><td class='td'>"+a.quantidade+"</td></tr>";c.innerHTML+=b})})},buscarMateriais=function(){var a="SELECT id, nome, marca FROM materiais LIMIT 0,4";mysqlQuery(a,function(a){var b=JSON.parse(a),c=document.getElementById("conteudo-material");b.forEach(function(a){var b="<tr class='material_"+a.id+"'' data-id="+a.id+"><td class='td'>"+a.marca+"</td><td class='td'>"+a.nome+"</td><td class='td'><i class='fa fa-chevron-down'></td></tr>";c.innerHTML+=b})})},buscarMaterialPedido=function(a){var b="SELECT m.id, m.id_pedido, m.nome, m.marca, m.quantidade AS qt_material, m.preco AS vl_material, p.data_de_compra, p.id, s.nome AS nm_solicitante,  i.quantidade AS qt_insumo, i.preco AS vl_insumo FROM materiais m, pedidos p, insumos i, solicitantes s WHERE p.id = m.id_pedido AND p.id = i.id_pedido AND p.id_solicitante = s.id AND m.id="+a+" GROUP BY p.id";mysqlQuery(b,function(a){var b=JSON.parse(a),c=document.getElementById("conteudo-pedido-material");b.forEach(function(a){var b=a.vl_insumo*a.qt_insumo+a.vl_material*a.qt_material,d="<tr><td class='td'>"+a.id_pedido+"</td><td class='td'>"+a.nm_solicitante+"</td><td class='td'>"+formataData(a.data_de_compra)+"</td><td class='td'>"+a.qt_material+"</td><td class='td'>"+b+"</td></tr>";c.innerHTML+=d})})},buscarPedidosSolicitantes=function(){function a(){var b,d,a="SELECT s.nome, COUNT(p.id_solicitante) AS qt_pedido FROM solicitantes s, pedidos p WHERE s.id = p.id_solicitante GROUP BY s.nome",c=[];mysqlQuery(a,function(a){b=JSON.parse(a),c.push(["solicitante","quantidade"]),b.forEach(function(a){c.push([a.nome,a.qt_pedido])}),d=google.visualization.arrayToDataTable(c);var e={title:"Pedidos por solicitante",is3D:!0,colors:["#FF954D","#00A4D3","#65E144","#856DD6"]},f=new google.visualization.PieChart(document.getElementById("piechart_3d"));f.draw(d,e)})}google.charts.setOnLoadCallback(a)},buscarPedidosDiarios=function(){var b,d,a="SELECT COUNT(id) AS qt_pedido, data_de_compra FROM pedidos GROUP BY data_de_compra",c=[];mysqlQuery(a,function(a){b=JSON.parse(a),c.push(["Data","quantidade"]);var e,f=1;b.forEach(function(a){e==formataData(a.data_de_compra)&&(f+=1),e=formataData(a.data_de_compra),c.push([formataData(a.data_de_compra),f])}),d=google.visualization.arrayToDataTable(c);var g={title:"Quantidade de pedidos por dia",is3D:!0},h=new google.visualization.PieChart(document.getElementById("pedidos-dia-chart"));h.draw(d,g)})},formataData=function(a){formato_brasil=new Date(a);var b=formato_brasil.getDate();10>b&&(b="0"+b);var c=formato_brasil.getMonth()+1;10>c&&(c="0"+c);var d=formato_brasil.getFullYear(),e=b+"/"+c+"/"+d;return e};