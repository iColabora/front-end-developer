function chartPedidosMes(){var a="SELECT\n                            COUNT(id) AS qnt, \n                            SUBSTRING(CAST(data_de_compra AS DATE), 1, 10) AS data_pedidos \n                       FROM\n                            pedidos \n                       GROUP BY \n                            data_de_compra";mysqlQuery(a,function(a){var b=JSON.parse(a),c=new Array;for(var d in b){var e={category:b[d].data_pedidos,"column-1":b[d].qnt,color:"#41bd9d",lineColorField:"#41bd9d"};c.push(e)}AmCharts.makeChart("chartdiv1",{type:"serial",categoryField:"category",dataDateFormat:"YYYY-MM-DD",startDuration:1,theme:"light",categoryAxis:{gridPosition:"start",parseDates:!0},chartCursor:{enabled:!0},chartScrollbar:{enabled:!0},trendLines:[],graphs:[{balloonText:"<strong>[[category]]</strong><br>Total de pedidos: [[value]]",fillAlphas:1,id:"AmGraph-1",title:"graph 1",type:"column",valueField:"column-1",colorField:"color",lineColorField:"lineColorField"}],guides:[],valueAxes:[{id:"ValueAxis-1",title:"Total de pedidos",integersOnly:!0}],titles:[{id:"Title-1",size:15,text:"Total de pedidos por per√≠odo mensal"}],dataProvider:c})})}function chartPedidosSolic(){var a="SELECT    \n                        s.nome, \n                        COUNT(p.id) AS qnt\n                       FROM    \n                        pedidos p\n                       INNER JOIN    \n                        solicitantes s\n                         ON s.id = p.id_solicitante\n                       GROUP BY(p.id)";mysqlQuery(a,function(a){var b=JSON.parse(a),c=new Array;for(var d in b){var e={category:b[d].nome,"column-1":b[d].qnt,color:"#41bd9d",lineColorField:"#41bd9d"};c.push(e)}AmCharts.makeChart("chartdiv2",{type:"serial",categoryField:"category",startDuration:1,theme:"light",categoryAxis:{gridPosition:"start",labelRotation:33},graphs:[{balloonText:"[[category]]:[[value]] pedidos feitos",fillAlphas:1,id:"AmGraph-1",title:"graph 1",type:"column",valueField:"column-1",colorField:"color",lineColorField:"lineColorField"}],guides:[],valueAxes:[{id:"ValueAxis-1",title:"Total de pedidos",integersOnly:!0}],titles:[{id:"Title-1",size:15,text:"Total de pedidos por solicitante"}],dataProvider:c})})}function buscaPedidosPendentes(){var a="SELECT\n                        p.id, p.data_de_compra, s.nome \n                       FROM pedidos p\n                        INNER JOIN solicitantes s\n                        ON s.id = p.id_solicitante";mysqlQuery(a,function(a){$("#tBodyPedidos").html("");var b=JSON.parse(a);for(var c in b){var d="<tr><td class='text-center'>"+b[c].id+"</td><td>"+b[c].nome+"</td><td>"+b[c].data_de_compra+"</td></tr>";$("#tBodyPedidos").append(d)}})}$(document).ready(function(){chartPedidosMes(),chartPedidosSolic(),buscaPedidosPendentes(),$("#refreshChart1").click(function(){chartPedidosMes()}),$("#refreshChart2").click(function(){chartPedidosSolic()}),$("#refreshTable").click(function(){buscaPedidosPendentes()})});