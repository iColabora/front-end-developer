function dataAtualFormatada(){var a=new Date,b=a.getDate(),c=a.getFullYear(),d=a.getMonth()+1;return 1==b.toString().length&&(b="0"+b),1==d.toString().length&&(d="0"+d),b+"/"+d+"/"+c}function Ajax(a,b,c){$(".content").html(""),$.ajax({url:a,type:b,dataType:c,success:function(a){$(".content").html(a)},error:function(){$(".content").html("<p>Erro ao carregar página.</p>")}})}function BloqueiaLetras(a){var b;return b=window.event?event.keyCode:a.which,b>=48&&b<=57||8==b}$(document).ready(function(){$("#ico-menu-mobile").click(function(){$("#container-menu-mobile").slideDown("fast")}),$("#bt-pesquisar").click(function(){$("#container-pesquisar").slideDown("fast"),$("#input-pesquisar").focus()}),$("#input-pesquisar").keypress(function(){return BloqueiaLetras(event)}),$("#bt_fechar").click(function(){$("#container-pesquisar").slideUp("fast"),$("#input-pesquisar").val(""),$(".pedido-branco").slideUp("fast")}),$("#bt_fechar_mobile").click(function(){$("#container-menu-mobile").slideUp("fast")}),$("#mobile-dashboards").click(function(){Ajax("dashboards.html","POST","html"),$("#container-menu-mobile").slideUp("fast")}),$("#mobile-pesquisar").click(function(){Ajax("dashboards.html","POST","html"),$("#container-menu-mobile").slideUp("fast"),$("#container-pesquisar").slideDown("fast"),$("#input-pesquisar").focus()}),$("#bt-pesquisar-pedido").click(function(){if($("#input-pesquisar").val().length<1)$(".pedido-branco").slideDown("fast"),$("#input-pesquisar").focus();else{$(".pedido-branco").slideUp("fast"),$("#container-pesquisar").slideUp("fast"),Ajax("pesquisar_pedidos.html","POST","html");var a=$("#input-pesquisar").val(),b="SELECT p.id id_pedido, p.data_de_compra, p.cep, ";b+="p.rua, p.numero, p.bairro, p.cidade, p.estado, p.pais ",b+="from pedidos p ",b+="where p.id = "+a,mysqlQuery(b,function(a){var b=JSON.parse(a);b.forEach(function(a){$("#conteudo-pedido").html("<tr><td>"+a.id_pedido+"</td><td>"+a.data_de_compra+"</td><td>"+a.cep+"</td><td>"+a.rua+"</td><td>"+a.numero+"</td><td>"+a.bairro+"</td><td>"+a.cidade+"</td><td>"+a.estado+"</td><td>"+a.pais+"</td></tr>")})}),$("#input-pesquisar").val("")}}),$("#pag-dashboards").click(function(){Ajax("dashboards.html","POST","html")}),$("#bt-dashboard-one").live("click","#bt-dashboard-one",function(){$("#content-dashboard").hide(),$("#grafico").show();var a=dataAtualFormatada(),b="SELECT COUNT(P.ID) qtde FROM pedidos P ";b+="WHERE P.DATA_DE_COMPRA = '"+a+"'",mysqlQuery(b,function(b){var c=JSON.parse(b);c.forEach(function(b){function d(){var b=google.visualization.arrayToDataTable([["Data","Quantidade"],[a,c]]),d={title:"Quantidade de pedidos por dia"},e=new google.visualization.DataView(b),f=new google.visualization.BarChart(document.getElementById("grafico"));f.draw(e,d)}var c=b.qtde;google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(d)})})}),$("#bt-dashboard-two").live("click","#bt-dashboard-two",function(){$("#content-dashboard").hide(),$("#grafico").show();var a="select s.nome nome, count(p.id) qtde from pedidos p inner join solicitantes s ";a+="on s.id = p.id_solicitante",mysqlQuery(a,function(a){var b=JSON.parse(a);b.forEach(function(a){function d(){var a=google.visualization.arrayToDataTable([["Cliente","Quantidade de pedidos"],[b,c]]),d={title:"Quantidade de pedidos por Cliente"},e=new google.visualization.DataView(a),f=new google.visualization.BarChart(document.getElementById("grafico"));f.draw(e,d)}var b=a.nome,c=a.qtde;google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(d)})})}),$("#bt-dashboard-three").live("click","#bt-dashboard-three",function(){$("#grafico").hide();var a="SELECT p.id id_pedido, s.nome nome_solicitante, p.data_de_compra, p.cep, ";a+="p.rua, p.numero, p.bairro, p.cidade, p.estado, p.pais ",a+="from pedidos p inner join solicitantes s ",a+="where p.data_de_compra is not null",mysqlQuery(a,function(a){var b=JSON.parse(a);b.forEach(function(a){$("#conteudo-dashboard").html("<tr><td>"+a.id_pedido+"</td><td>"+a.nome_solicitante+"</td><td>"+a.data_de_compra+"</td><td>"+a.cep+"</td><td>"+a.rua+"</td><td>"+a.numero+"</td><td>"+a.bairro+"</td><td>"+a.cidade+"</td><td>"+a.estado+"</td><td>"+a.pais+"</td></tr>")})}),$("#content-dashboard").show()}),Ajax("pedidos.html","POST","html"),$("#logo").click(function(){Ajax("pedidos.html","POST","html")}),$("#num-pedido, #qtde-material, #qtde-insumo, #cep-entrega").live("keypress","#qtde-insumo, #num-pedido, #qtde-material, #cep-entrega",function(){return BloqueiaLetras(event)}),$("#bt-cadastrar-pedido").live("click","#bt-cadastrar-pedido",function(){$("#num-pedido").val().length<1?(alert("Campo número do pedido em branco"),$("#num-pedido").focus()):$("#inp-material-pedido").val().length<1?(alert("Campo material em branco"),$("#inp-material-pedido").focus()):$("#inp-marca").val().length<1?(alert("Campo marca em branco"),$("#inp-marca").focus()):$("#preco-material").val().length<1?(alert("Campo preço em branco"),$("#preco-material").focus()):$("#data-compra").val().length<1?(alert("Campo data da compra em branco"),$("#data-compra").focus()):$("#qtde-material").val().length<1?(alert("Campo quantidade material em branco"),$("#qtde-material").focus()):$("#marca-insumo").val().length<1?(alert("Campo marca do insumo em branco"),$("#marca-insumo").focus()):$("#desc-insumo").val().length<1?(alert("Campo descrição do insumo em branco"),$("#desc-insumo").focus()):$("#qtde-insumo").val().length<1?(alert("Campo quantidade de insumo em branco"),$("#qtde-insumo").focus()):$("#preco-insumo").val().length<1?(alert("Campo preço do insumo em branco"),$("#preco-insumo").focus()):$("#nome-solicitante").val().length<1?(alert("Campo nome do solicitante em branco"),$("#nome-solicitante").focus()):$("#telefone-solicitante").val().length<1?(alert("Campo telefone do solicitante em branco"),$("#telefone-solicitante").focus()):$("#cpf-solicitante").val().length<1?(alert("Campo cpf do solicitante em branco"),$("#cpf-solicitante").focus()):$("#cep-solicitante").val().length<1?(alert("Campo cep do solicitante em branco"),$("#cep-solicitante").focus()):$("#endereco-solicitante").val().length<1?(alert("Campo endereço do solicitante em branco"),$("#endereco-solicitante").focus()):$("#bairro-solicitante").val().length<1?(alert("Campo bairro do solicitante em branco"),$("#bairro-solicitante").focus()):$("#numero-solicitante").val().length<1?(alert("Campo número do solicitante em branco"),$("#numero-solicitante").focus()):$("#cidade-solicitante").val().length<1?(alert("Campo cidade do solicitante em branco"),$("#cidade-solicitante").focus()):$("#estado-solicitante").val().length<1?(alert("Campo estado do solicitante em branco"),$("#estado-solicitante").focus()):$("#pais-solicitante").val().length<1?(alert("Campo país do solicitante em branco"),$("#pais-solicitante").focus()):$("#cep-entrega").val().length<1?(alert("Campo cep de entrega em branco"),$("#cep-entrega").focus()):$("#endereco-entrega").val().length<1?(alert("Campo endereço de entrega em branco"),$("#endereco-entrega").focus()):$("#bairro-entrega").val().length<1?(alert("Campo bairro da entrega em branco"),$("#bairro-entrega").focus()):$("#numero-entrega").val().length<1?(alert("Campo número de entrega em branco"),$("#numero-entrega").focus()):$("#cidade-entrega").val().length<1?(alert("Campo cidade de entrega em branco"),$("#cidade-entrega").focus()):$("#estado-entrega").val().length<1?(alert("Campo estado de entrega em branco"),$("#estado-entrega").focus()):$("#pais-entrega").val().length<1&&(alert("Campo país de entrega em branco"),$("#pais-entrega").focus())}),$("#cep-solicitante").live("change","#cep-solicitante",function(){var a=$("#cep-solicitante").val();$.ajax({url:"https://viacep.com.br/ws/"+a+"/json",type:"GET",dataType:"json",success:function(a){$("#endereco-solicitante").val(a.logradouro),$("#cidade-solicitante").val(a.localidade),$("#estado-solicitante").val(a.uf)}})}),$("#cep-entrega").live("change","#cep-entrega",function(){var a=$("#cep-entrega").val();$.ajax({url:"https://viacep.com.br/ws/"+a+"/json",type:"GET",dataType:"json",success:function(a){$("#endereco-entrega").val(a.logradouro),$("#cidade-entrega").val(a.localidade),$("#estado-entrega").val(a.uf)}})})});