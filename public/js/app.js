var Database={fetchAllPedidos:function(e){this._execute("SELECT * FROM pedidos",e)},findMaterialByPedidoId:function(e,a){var i="SELECT * FROM materiais WHERE id_pedido ="+e;this._execute(i,a)},fetchAllSolicitantes:function(e){this._execute("SELECT * FROM solicitantes",e)},_execute:function(e,a){mysqlQuery(e,function(e){var i=JSON.parse(e);a(i)})}},Validator=function(e,a){var i={required:function(a){return e.val().length>0},max:function(a){return e.val().length<=a},min:function(a){return e.val().length>=a}},t=[];this.validate=function(e){for(var a in t){var n=t[a];if(!i[n.name]||!i[n.name](n.opt))return void e(n,!1)}e({},!0)},function(){var e=a.split("|");for(var i in e){var n=e[i].split(":");t[n[0]]={name:n[0],opt:n[1]}}}()},FormWizard=function(e,a){var i=$(e),t=[],n=function(){for(var e in a)o(e,a[e])},o=function(e,a){$elField=i.find('input[name="'+e+'"]'),t[e]={el:$elField},a.rules&&(t[e].validator=new Validator($elField,a.rules)),l(t[e]),a.isDate&&s(t[e]),a.mask&&r(t[e],a.mask,a.onCompleteMask)},r=function(e,a,i){var t={onComplete:i||function(){}};e.el.mask(a,t)},s=function(e){e.el.datepicker({format:"dd/mm/yyyy",language:"pt-BR"})},l=function(e){e.el.on("keyup",function(){e.validator&&d(t[$(this).attr("name")])})},d=function(e){e.validator.validate(function(a,i){var t=e.el.parent();t.find(".validator-errors span").removeClass("show"),i?t.removeClass("has-error").addClass("has-success"):(console.log('.validator-errors span[data-error="'+a.name+'"]'),t.find('.validator-errors span[data-error="'+a.name+'"]').addClass("show"),t.addClass("has-error"))})};this.setValue=function(e){for(var a in e)t[a]&&t[a].el.attr("value",e[a])},this.setEnabled=function(e){for(var a in e)t[e[a]]&&t[e[a]].el.removeAttr("disabled")},this.setDisabled=function(e){for(var a in e)t[e[a]]&&t[e[a]].el.attr("disabled","disabled")},this.init=function(){n()},this.init()},Paginator=function(e,a){var i=this,t=$(e),n=$(a),o=function(){t.click(function(){$(this).hasClass("enabled")&&i.setSelectedPage($(this).attr("href").replace("#",""))})};this.init=function(){o()},this.setSelectedPage=function(e){n.find(".page").removeClass("show-page").addClass("hide-page"),this.selectedPage=n.find("div[data-page="+e+"]"),this.selectedPage.addClass("show-page").removeClass("hide-page")}},CEP={getInfo:function(e,a){$.getJSON("https://viacep.com.br/ws/"+e+"/json/",function(e){if(e.erro)a(e);else{var i={rua:e.logradouro,cidade:e.localidade,bairro:e.bairro,uf:e.uf,pais:"Brasil"};a(i)}})}},Core={paginatorMenu:null,validator:null,formPedido:null,init:function(){var e=this;this.paginatorMenu=new Paginator("#menu ul a",".paginator"),this.paginatorMenu.init(),Database.fetchAllSolicitantes(function(e){console.log(e)}),this.formPedido=new FormWizard(".form-wizard.form-pedido",{data_de_compra:{isDate:!0},cep:{mask:"00000-000",onCompleteMask:function(a){e.searchCep(a)}},nome:{rules:"required|min:3|max:10"},rua:{rules:"required|min:3"}})},searchCep:function(e){var a=this,i=["rua","numero","complemento","cidade","estado"];this.formPedido.setDisabled(i),CEP.getInfo(e,function(e){a.formPedido.setValue(e),a.formPedido.setEnabled(i)})}};Core.init();